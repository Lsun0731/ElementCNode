webpackJsonp([1],{DReE:function(t,e){},MNdN:function(t,e){},Mt7O:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("kV13"),o=a("4YfN"),n=a.n(o),i=a("fUgm"),r={name:"App",data:function(){return{badgeText:"",activeIndex:"/topiclist/all",isShowToast:!1,toastText:"",dialogFormVisible:!1,form:{accesstoken:""},formLabelWidth:"120px"}},created:function(){if(window.localStorage.getItem("loginStatus")&&(this.mutationLogin(),this.mutationLoginname(window.localStorage.getItem("loginname")),this.mutationAccesstoken(window.localStorage.getItem("accesstoken")),this.mutationAuthorId(window.localStorage.getItem("author_id"))),this.isLogined){this.getUnreadmMsgCount();var t=this;window.setInterval(function(){t.getUnreadmMsgCount()},18e4)}},computed:n()({},Object(i.d)(["topics","isLogined","loginname"])),methods:n()({},Object(i.c)(["mutationLogin","mutationLoginname","mutationAccesstoken","mutationAuthorId"]),{getUnreadmMsgCount:function(){var t=this;this.$http.get("/message/count",{params:{accesstoken:this.$store.state.accesstoken}}).then(function(e){console.log(e.data.data),e.data&&e.data.success&&(t.badgeText=e.data.data)})},handleSelect:function(t,e){console.log(t,e),this.$router.push(""+e),console.log(this.$router),console.log(this.$route)},loging:function(){console.log("ok");var t=this;this.$http.post("/accesstoken",{accesstoken:this.form.accesstoken}).then(function(e){t.mutationLogin(),t.mutationLoginname(e.data.loginname),t.mutationAccesstoken(t.form.accesstoken),t.mutationAuthorId(e.data.id),window.localStorage.setItem("loginStatus",!0),window.localStorage.setItem("loginname",e.data.loginname),window.localStorage.setItem("accesstoken",t.form.accesstoken),window.localStorage.setItem("author_id",e.data.id),t.$router.push("/user/"+e.data.loginname),t.$router.go(0)}).catch(function(e){console.log(e.response),t.isShowToast=!0,t.toastText=e.response.data.error_msg,t.$notify.error({title:"错误",message:e.response.data.error_msg})})}})},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("el-container",[a("el-header",[a("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":t.activeIndex,mode:"horizontal","background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"},on:{select:t.handleSelect}},[a("el-row",{attrs:{type:"flex"}},[a("el-col",{attrs:{span:5}},[a("el-menu-item",{attrs:{index:"/"}},[a("el-image",{staticStyle:{width:"200px",height:"auto","margin-left":"25px"},attrs:{src:"//static2.cnodejs.org/public/images/cnodejs_light.svg"}})],1)],1),t._v(" "),t._l(t.topics,function(e,s){return a("el-menu-item",{key:s,attrs:{index:/topiclist/+e.name}},[t._v(t._s(e.desc))])}),t._v(" "),a("el-col",{attrs:{span:2,offset:6}},[0==t.isLogined?a("el-menu-item",{attrs:{index:""},on:{click:function(e){t.dialogFormVisible=!0}}},[t._v("登录")]):a("el-submenu",{attrs:{index:""}},[a("template",{slot:"title"},[t._v("\n                "+t._s(t.loginname)+"\n                "),a("el-badge",{staticClass:"item",attrs:{value:t.badgeText,hidden:t.badgeText<=0}})],1),t._v(" "),a("el-menu-item",{attrs:{index:"/center"}},[a("i",{staticClass:"el-icon-user-solid"}),t._v("个人中心\n              ")]),t._v(" "),a("el-menu-item",{attrs:{index:"/msg"}},[a("i",{staticClass:"el-icon-chat-dot-round"}),t._v("消息通知\n                "),a("el-badge",{directives:[{name:"show",rawName:"v-show",value:t.badgeText>0,expression:"badgeText>0"}],staticClass:"item",attrs:{"is-dot":""}})],1),t._v(" "),a("el-menu-item",{attrs:{index:"/create"}},[a("i",{staticClass:"el-icon-edit-outline"}),t._v("发表话题\n              ")]),t._v(" "),a("el-menu-item",{attrs:{index:"/logout"}},[a("i",{staticClass:"el-icon-switch-button"}),t._v("退出\n              ")])],2)],1)],2)],1)],1),t._v(" "),a("router-view")],1),t._v(" "),a("el-dialog",{attrs:{title:"登录",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{attrs:{model:t.form}},[a("el-form-item",{attrs:{label:"accesstoken","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.accesstoken,callback:function(e){t.$set(t.form,"accesstoken",e)},expression:"form.accesstoken"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogFormVisible=!1,t.loging()}}},[t._v("确 定")])],1)],1),t._v(" "),a("el-alert",{directives:[{name:"show",rawName:"v-show",value:t.isShowToast,expression:"isShowToast"}],attrs:{title:t.toastText,type:"error"}}),t._v(" "),a("el-backtop",{attrs:{bottom:100}},[a("div",{staticStyle:{"{\n      height":"100%",width:"100%","background-color":"#f2f5f6","box-shadow":"0 0 6px rgba(0,0,0, .12)","text-align":"center","line-height":"40px",color:"#1989fa"}},[a("i",{staticClass:"el-icon-top"})])])],1)},staticRenderFns:[]};var c=a("C7Lr")(r,l,!1,function(t){a("tJEP")},null,null).exports,d=a("wUgx"),u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("h1",[t._v(t._s(t.msg))]),t._v(" "),a("h2",[t._v("Essential Links")]),t._v(" "),t._m(0),t._v(" "),a("h2",[t._v("Ecosystem")]),t._v(" "),t._m(1)])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",[a("li",[a("a",{attrs:{href:"https://vuejs.org",target:"_blank"}},[t._v("\n        Core Docs\n      ")])]),t._v(" "),a("li",[a("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank"}},[t._v("\n        Forum\n      ")])]),t._v(" "),a("li",[a("a",{attrs:{href:"https://chat.vuejs.org",target:"_blank"}},[t._v("\n        Community Chat\n      ")])]),t._v(" "),a("li",[a("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank"}},[t._v("\n        Twitter\n      ")])]),t._v(" "),a("br"),t._v(" "),a("li",[a("a",{attrs:{href:"http://vuejs-templates.github.io/webpack/",target:"_blank"}},[t._v("\n        Docs for This Template\n      ")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[e("a",{attrs:{href:"http://router.vuejs.org/",target:"_blank"}},[this._v("\n        vue-router\n      ")])]),this._v(" "),e("li",[e("a",{attrs:{href:"http://vuex.vuejs.org/",target:"_blank"}},[this._v("\n        vuex\n      ")])]),this._v(" "),e("li",[e("a",{attrs:{href:"http://vue-loader.vuejs.org/",target:"_blank"}},[this._v("\n        vue-loader\n      ")])]),this._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank"}},[this._v("\n        awesome-vue\n      ")])])])}]};a("C7Lr")({name:"HelloWorld",data:function(){return{msg:"Welcome to Your Vue.js App"}}},u,!1,function(t){a("Mt7O")},"data-v-d8ec41bc",null).exports;var p={name:"topiclist",props:["name"],data:function(){return{loading:!1,lists:[],page:1,limit:15}},computed:n()({},Object(i.d)(["topics"]),Object(i.b)(["getTopicDescByTab"])),methods:{sy:function(t){if(1==this.page)this.$message({message:"已经是第一页喽",type:"warning"});else{var e=this;this.page=this.page-1,this.$http.get("/topics",{params:{tab:this.name,page:this.page,limit:this.limit}}).then(function(t){console.log(t.data.data),e.lists=t.data.data})}},xy:function(){var t=this;this.page=this.page+1,this.$http.get("/topics",{params:{tab:this.name,page:this.page,limit:this.limit}}).then(function(e){console.log(e.data.data),t.lists=e.data.data})},toplic:function(t,e,a){this.$router.push("/topic/"+t.id)},topic2:function(t){console.log(t),this.$router.push("/topic/"+t)}},beforeRouteEnter:function(t,e,a){a(function(e){e.$http.get("/topics",{params:{tab:t.params.name,page:e.page,limit:e.limit}}).then(function(t){console.log(t.data.data),t.data.success&&(e.lists=t.data.data)})})},beforeRouteUpdate:function(t,e,a){var s=this;this.page=1,this.$http.get("/topics",{params:{tab:t.params.name,page:this.page,limit:this.limit}}).then(function(t){console.log(t.data.data),t.data.success&&(s.lists=t.data.data)}),a()}},v={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-container",[s("el-aside",{attrs:{width:"300px"}},[s("el-card",{staticClass:"box-card"},[s("div",{staticClass:"text item"},[t._v("CNode: node.js专业中文社区")]),t._v(" "),s("img",{attrs:{src:a("xAza"),alt:""}})])],1),t._v(" "),s("el-main",[t._l(t.lists,function(e,a){return s("el-row",{key:a,staticClass:"row-bg",attrs:{type:"flex",align:"middle"},nativeOn:{click:function(a){return a.preventDefault(),a.stopPropagation(),t.topic2(e.id)}}},[s("el-col",{attrs:{span:1}},[s("el-avatar",{attrs:{shape:"square",size:40,src:e.author.avatar_url}})],1),t._v(" "),s("el-col",{attrs:{span:2}},[s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top"}},[s("div",{attrs:{slot:"content"},slot:"content"},[t._v("\n              阅读数:"+t._s(e.visit_count)+"\n              "),s("br"),t._v("\n              回复数:"+t._s(e.reply_count)+"\n            ")]),t._v(" "),s("el-tag",[t._v(t._s(e.visit_count)+" / "+t._s(e.reply_count))])],1)],1),t._v(" "),s("el-col",{staticStyle:{"font-size":"10px"},attrs:{span:16}},[e.top?s("el-tag",{attrs:{type:"success",effect:"dark"}},[t._v("置顶")]):e.good?s("el-tag",{attrs:{type:"success",effect:"dark"}},[t._v("精华")]):"/topiclist/all"==t.$route.path||"/topiclist/good"==t.$route.path?s("el-tag",{attrs:{type:"success",effect:"dark"}},[t._v(t._s(t.getTopicDescByTab(e.tab)))]):t._e(),t._v(" "),s("el-link",[t._v(t._s(e.title))])],1),t._v(" "),s("el-col",{attrs:{span:1}},[s("el-avatar",{attrs:{shape:"square",size:25,src:e.author.avatar_url}})],1),t._v(" "),s("el-col",{attrs:{span:4}},[s("span",[t._v(t._s(e.create_at))])])],1)}),t._v(" "),s("nav",{attrs:{"aria-label":"..."}},[s("ul",{staticClass:"pager"},[s("li",{class:1==t.page?"previous disabled":"previous",on:{click:function(e){return e.preventDefault(),t.sy(e)}}},[s("a",{attrs:{href:"#"}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("←")]),t._v(" 上一页\n            ")])]),t._v(" "),s("li",{staticClass:"next",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.xy(e)}}},[s("a",{attrs:{href:"#"}},[t._v("\n              下一页\n              "),s("span",{attrs:{"aria-hidden":"true"}},[t._v("→")])])])])])],2)],1)],1)},staticRenderFns:[]};var h=a("C7Lr")(p,v,!1,function(t){a("btno")},"data-v-c5288ea0",null).exports,m={name:"topic",props:["id"],data:function(){return{topic:null,replyContent:"",userinfo:"",names:""}},computed:n()({},Object(i.d)(["isLogined"]),Object(i.b)(["getTopicDescByTab"])),methods:{addReply:function(t){this.$http.post("/topic/"+this.topic.id+"replies",{accesstoken:this.$store.state.accesstoken,content:this.replyContent}).then(function(t){})},collect:function(){if(0!=this.$store.state.isLogined){var t=this;this.$http.post("/topic_collect/collect",{accesstoken:this.$store.state.accesstoken,topic_id:this.topic.id}).then(function(e){console.log(e.data),e.data&&e.data.success&&(t.topic.is_collect=!0)})}else this.$message({message:"未登录,请先登录",type:"warning"})},decollect:function(){var t=this;this.$http.post("/topic_collect/de_collect",{accesstoken:this.$store.state.accesstoken,topic_id:this.topic.id}).then(function(e){console.log(e.data),e.data&&e.data.success&&(t.topic.is_collect=!1)})}},beforeRouteEnter:function(t,e,a){a(function(e){e.$http.get("/topic/"+t.params.id,{params:{accesstoken:e.$store.state.accesstoken}}).then(function(t){console.log(t.data.data),e.topic=t.data.data,e.$http.get("/user/"+t.data.data.author.loginname).then(function(t){console.log(t.data),e.userinfo=t.data.data})})})},beforeRouteUpdate:function(t,e,a){var s=this;this.$http.get("/topic/"+t.params.id,{params:{accesstoken:this.$store.state.accesstoken}}).then(function(t){console.log(t.data.data),s.topic=t.data.data,s.$http.get("/user/"+t.data.data.author.loginname).then(function(t){console.log(t.data),s.userinfo=t.data.data})}),a()},created:function(){}},f={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.topic?a("div",[a("el-container",[a("el-aside",{attrs:{width:"300px"}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("个人信息")])]),t._v(" "),a("div",{staticClass:"text item"},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-avatar",{attrs:{shape:"square",size:40,fit:"fill",src:t.topic.author.avatar_url}})],1),t._v(" "),a("el-col",{attrs:{span:16}},[t._v(t._s(t.topic.author.loginname))])],1),t._v(" "),a("el-divider"),t._v(" "),a("span",[t._v("积分:"+t._s(t.userinfo.score))])],1)])],1),t._v(" "),a("el-main",[a("div",[a("div",[a("h3",[t._v(t._s(t.topic.title))])]),t._v(" "),a("div",[a("ul",[a("li",[t._v("\n              发布于"+t._s(t.topic.create_at)+"\n            ")]),t._v(" "),a("li",[a("span",[t._v("\n                作者：\n                "),a("el-link",{attrs:{href:"#/user/"+t.topic.author.loginname,type:"info"}},[t._v(t._s(t.topic.author.loginname))])],1)]),t._v(" "),a("li",[a("span",[t._v(t._s(t.topic.visit_count)+"次浏览")])]),t._v(" "),a("li",[a("span",[t._v("来自："+t._s(t.getTopicDescByTab(t.topic.tab)))])]),t._v(" "),t.topic.author_id==t.$store.state.author_id?a("li",[a("el-link",{attrs:{type:"info",href:"#/topic/"+t.topic.id+"/edit",icon:"el-icon-edit"}},[t._v("编辑话题")])],1):t._e()]),t._v(" "),0==t.topic.is_collect?a("el-button",{attrs:{type:"success"},nativeOn:{click:function(e){return t.collect(e)}}},[t._v("收藏")]):a("el-button",{attrs:{type:"info",plain:""},nativeOn:{click:function(e){return t.decollect(e)}}},[t._v("取消收藏")])],1),t._v(" "),a("el-divider"),t._v(" "),a("div",{domProps:{innerHTML:t._s(t.topic.content)}})],1),t._v(" "),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v(t._s(t.topic.replies.length)+" 回复")])]),t._v(" "),t._l(t.topic.replies,function(e,s){return a("div",{key:s,staticClass:"text item"},[a("el-row",{attrs:{type:"flex",align:"middle"}},[a("el-col",{attrs:{span:1}},[a("el-avatar",{attrs:{shape:"square",size:35,src:e.author.avatar_url}})],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-link",{attrs:{type:"primary",href:"#/user/"+e.author.loginname}},[t._v(t._s(e.author.loginname))]),t._v(" "),a("el-tag",{attrs:{type:"info",size:"small"}},[t._v(t._s(s+1)+"楼")])],1),t._v(" "),a("el-col",{attrs:{span:2,offset:15}},[a("i",{staticClass:"el-icon-star-off"}),t._v(" "),a("span",[t._v(t._s(e.ups.length))])])],1),t._v(" "),a("div",{staticStyle:{padding:"5px"},domProps:{innerHTML:t._s(e.content)}}),t._v(" "),a("el-divider")],1)}),t._v(" "),a("el-form",{ref:"form",attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"回复评论"}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.replyContent,callback:function(e){t.replyContent=e},expression:"replyContent"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.addReply(1)}}},[t._v("回复")])],1)],1)],2)],1)],1)],1):t._e()},staticRenderFns:[]};var g=a("C7Lr")(m,f,!1,function(t){a("nKBr")},"data-v-559f84aa",null).exports,_={render:function(){var t=this.$createElement;return(this._self._c||t)("div")},staticRenderFns:[]};var b=a("C7Lr")({name:"center",computed:{loginname:function(){return this.$store.state.loginname}},created:function(){this.$router.replace("/user/"+this.loginname)}},_,!1,function(t){a("soM1")},null,null).exports,x={name:"user",props:["loginname"],data:function(){return{userinfo:null,collect_topics:null}},components:{},beforeRouteEnter:function(t,e,a){a(function(e){e.$http.get("/user/"+t.params.loginname).then(function(t){console.log(t.data),e.userinfo=t.data.data}),e.$http.get("/topic_collect/"+t.params.loginname).then(function(t){console.log(t.data),e.collect_topics=t.data.data})})},beforeRouteUpdate:function(t,e,a){var s=this;this.$http.get("/user/"+t.params.loginname).then(function(t){console.log(t.data),s.userinfo=t.data.data}),this.$http.get("/topic_collect/"+t.params.loginname).then(function(t){console.log(t.data),s.collect_topics=t.data.data}),a()}},k={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.userinfo?a("div",[a("el-container",[a("el-aside",{attrs:{width:"300px"}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("个人信息")])]),t._v(" "),a("div",[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-avatar",{attrs:{shape:"square",size:40,fit:"fill",src:t.userinfo.avatar_url}})],1),t._v(" "),a("el-col",{attrs:{span:16}},[t._v(t._s(t.userinfo.loginname))])],1),t._v(" "),a("el-divider"),t._v(" "),a("span",[t._v("积分："+t._s(t.userinfo.score))])],1)])],1),t._v(" "),a("el-main",[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("el-breadcrumb",{attrs:{separator:"/",replace:"true"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("首页")]),t._v(" "),a("el-breadcrumb-item")],1)],1),t._v(" "),a("div",{staticClass:"text item"},[t._v(t._s(t.userinfo.loginname))]),t._v(" "),a("div",{staticClass:"text item"},[a("el-image",{staticStyle:{width:"50px",height:"50px"},attrs:{src:t.userinfo.avatar_url}})],1),t._v(" "),a("div",{staticClass:"text item"},[t._v("用户积分："+t._s(t.userinfo.score))]),t._v(" "),t.collect_topics?a("div",{staticClass:"text item"},[a("a",{attrs:{href:"#/collect/"+t.loginname}},[t._v(t._s(t.collect_topics.length)+"个话题被收藏")])]):t._e(),t._v(" "),a("div",[a("a",{attrs:{href:"http://github.com/"+t.userinfo.githubUsername}},[t._v("@ "+t._s(t.userinfo.githubUsername))])])]),t._v(" "),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("最近创建的话题")])]),t._v(" "),t._l(t.userinfo.recent_topics,function(e,s){return a("div",{key:s},[a("el-row",{attrs:{type:"flex",align:"bottom"}},[a("el-col",{attrs:{span:1}},[a("el-avatar",{attrs:{shape:"square",size:40,src:e.author.avatar_url}})],1),t._v(" "),a("el-col",{attrs:{span:17}},[a("el-link",{attrs:{type:"primary",href:"#/topic/"+e.id}},[t._v(t._s(e.title))])],1),t._v(" "),a("el-col",{attrs:{span:1}},[a("el-avatar",{attrs:{shape:"square",size:30,src:e.author.avatar_url}})],1),t._v(" "),a("el-col",{attrs:{span:5}},[t._v(t._s(e.last_reply_at))])],1),t._v(" "),a("el-divider")],1)})],2),t._v(" "),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("最近参与的话题")])]),t._v(" "),t._l(t.userinfo.recent_replies,function(e,s){return a("div",{key:s},[a("el-row",{attrs:{type:"flex",align:"bottom"}},[a("el-col",{attrs:{span:1}},[a("el-avatar",{attrs:{shape:"square",size:40,src:e.author.avatar_url}})],1),t._v(" "),a("el-col",{attrs:{span:17}},[a("el-link",{attrs:{type:"primary",href:"#/topic/"+e.id}},[t._v(t._s(e.title))])],1),t._v(" "),a("el-col",{attrs:{span:1}},[a("el-avatar",{attrs:{shape:"square",size:30,src:e.author.avatar_url}})],1),t._v(" "),a("el-col",{attrs:{span:5}},[t._v(t._s(e.last_reply_at))])],1),t._v(" "),a("el-divider")],1)})],2)],1)],1)],1):t._e()},staticRenderFns:[]};var y=a("C7Lr")(x,k,!1,function(t){a("XdWo")},"data-v-26f74623",null).exports,w={name:"logout",data:function(){return{isShowMsg:!1}},created:function(){var t=this;if(0!=this.$store.state.isLogined){var e=this;this.$confirm("此操作将退出, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){window.localStorage.clear(),t.$store.commit("mutationLogout"),t.$router.push("/"),e.$message({type:"success",message:"退出成功!"})}).catch(function(){e.$router.push("/"),t.$message({type:"info",message:"已取消退出"})})}else this.isShowMsg=!0}},C={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[this.isShowMsg?e("el-alert",{attrs:{title:"你还没有登录哦,请先登录哦",type:"error"}}):this._e()],1)},staticRenderFns:[]};var T=a("C7Lr")(w,C,!1,function(t){a("dpPd")},null,null).exports,R={name:"msg",data:function(){return{tabPosition:"left",selectedTabIndex:0,hasReadMsg:null,hasNotReadMsg:null}},computed:n()({},Object(i.d)(["topics","isLogined"])),created:function(){if(0!=this.isLogined){var t=this;this.$http.get("/messages",{params:{accesstoken:this.$store.state.accesstoken}}).then(function(e){console.log(e.data),t.hasReadMsg=e.data.data.has_read_messages,t.hasNotReadMsg=e.data.data.hasnot_read_messages})}else this.$message.error("您还未登录")},methods:{markRead:function(t){var e=this;this.$http.post("/message/mark_one/"+t,{accesstoken:this.$store.state.accesstoken}).then(function(t){console.log(t.data),t.data&&t.data.success&&(console.log("标记已读成功"),e.$router.go(0))})},markAll:function(){var t=this;this.$http.post("/message/mark_all",{accesstoken:this.$store.state.accesstoken}).then(function(e){e.data&&e.data.success&&t.$router.go(0)})}}},A={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-main",[a("el-tabs",{attrs:{"tab-position":t.tabPosition}},[a("el-tab-pane",{attrs:{label:"未读消息"}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("未读消息")]),t._v(" "),t.hasNotReadMsg&&t.hasNotReadMsg.length>0?a("el-button",{staticClass:"a",staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text",href:""},on:{click:function(e){return e.preventDefault(),t.markAll(e)}}},[t._v("标记全部消息为已读")]):a("el-tag",{attrs:{effect:"plain"}},[t._v("暂无未读消息")])],1),t._v(" "),t._l(t.hasNotReadMsg,function(e,s){return a("div",{key:s,staticClass:"text item"},[a("el-link",{attrs:{type:"primary",href:"/#/user/"+e.author.loginname}},[t._v(t._s(e.author.loginname))]),t._v("回复了你的\n            "),a("el-link",{attrs:{type:"info",href:"/#/topic/"+e.topic.id}},[t._v(t._s(e.topic.title))]),t._v(" "),a("el-button",{staticStyle:{float:"right",padding:"10px 0"},attrs:{type:"success",plain:""},nativeOn:{click:function(a){return t.markRead(e.id)}}},[t._v("标记已读")]),t._v(" "),a("el-divider")],1)})],2)],1),t._v(" "),a("el-tab-pane",{attrs:{label:"已读消息"}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("已读消息")])]),t._v(" "),t._l(t.hasReadMsg,function(e,s){return a("div",{key:s,staticClass:"text item"},[a("el-link",{attrs:{type:"primary",href:"/#/user/"+e.author.loginname}},[t._v(t._s(e.author.loginname))]),t._v("回复了你的\n            "),a("el-link",{attrs:{type:"info",href:"/#/topic/"+e.topic.id}},[t._v(t._s(e.topic.title))]),t._v(" "),a("el-divider")],1)})],2)],1)],1)],1)],1)},staticRenderFns:[]};var N=a("C7Lr")(R,A,!1,function(t){a("MNdN")},"data-v-ce7a7e42",null).exports,$=a("J4Ko"),E=(a("bZrT"),{name:"create",components:{mavonEditor:$.mavonEditor},data:function(){return{title:"",content:"",value:"请选择",list:["请选择","测试","分享","问答","招聘"],toolbars:{bold:!0,italic:!0,header:!0,underline:!0,mark:!0,quote:!0,ol:!0,ul:!0,link:!0,imagelink:!0,code:!0,table:!0,htmlcode:!0,help:!0,undo:!0,redo:!0,trash:!0,save:!0,alignleft:!0,aligncenter:!0,alignright:!0,subfield:!0,preview:!0}}},methods:{uploadImg:function(t,e){console.log(t),console.log(e);var a=new FromData;a.append("smfile",e),axios.post("https://sm.ms/api/v2/upload",a,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){console.log(e),this.$refs.md.$img2Url(t,e.data.data.url)})},addContent:function(){this.$http.post("topics",{title:this.title,content:this.content,tab:"dev",accesstoken:this.$store.state.accesstoken}).then(function(){1==res.data.seccess&&that.$router.replace("/topic/"+res.data.topic_id)})}}}),L={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-main",[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"text item"},[a("span",[t._v("选择板块:")]),t._v(" "),a("el-select",{model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.list,function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})}),1)],1),t._v(" "),a("div",{staticClass:"text item"},[a("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"标题字数10字以上"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),t._v(" "),a("div",{staticClass:"text item"},[a("mavon-editor",{attrs:{toolbars:t.toolbars},on:{imgAdd:t.uploadImg},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1),t._v(" "),a("div",{staticClass:"text item"},[a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.addContent(e)}}},[t._v("提交")])],1)])],1)],1)},staticRenderFns:[]};var M=a("C7Lr")(E,L,!1,function(t){a("DReE")},"data-v-26e7b27c",null).exports,D={name:"collect",props:["loginname"],data:function(){return{collect_topics:null,page:1,limit:15}},beforeRouteEnter:function(t,e,a){a(function(t){t.$http.get("/topic_collect/"+t.loginname).then(function(e){console.log(e.data.data),t.collect_topics=e.data.data})})},beforeRouteUpdate:function(t,e,a){var s=this;this.$http.get("/topic_collect/"+loginname).then(function(t){console.log(t.data.data),s.collect_topics=t.data.data}),a()}},F={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-main",[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v(t._s(t.loginname)+"收藏的话题")])]),t._v(" "),t._l(t.collect_topics,function(e,s){return a("div",{key:s},[a("el-avatar",{attrs:{shape:"square",size:40,src:e.author.avatar_url}}),t._v(" "),a("el-link",{attrs:{type:"primary",href:"#/topic/"+e.id}},[t._v(t._s(e.title))]),t._v(" "),a("el-divider")],1)})],2)],1)],1)},staticRenderFns:[]};var O=a("C7Lr")(D,F,!1,function(t){a("cp4y")},"data-v-8535d68a",null).exports,j={name:"edit",props:["id"],data:function(){return{topic:{title:"",content:""},value:"测试",list:["请选择","分享","问答","招聘","客户端测试"],toolbars:{bold:!0,italic:!0,header:!0,underline:!0,mark:!0,quote:!0,ol:!0,ul:!0,link:!0,imagelink:!0,code:!0,table:!0,htmlcode:!0,help:!0,undo:!0,redo:!0,trash:!0,save:!0,alignleft:!0,aligncenter:!0,alignright:!0,subfield:!0,preview:!0}}},components:{mavonEditor:$.mavonEditor},methods:{edittopic:function(){var t=this;this.$http.post("/topic/update",{topic_id:this.topic.id,title:this.topic.title,content:this.topic.content,accesstoken:this.$store.state.accesstoken,tab:"dev"}).then(function(e){t.$router.back()})}},beforeRouteEnter:function(t,e,a){a(function(e){e.$http.get("/topic/"+t.params.id).then(function(t){console.log(t.data),e.topic=t.data.data})})},beforeRouteUpdate:function(t,e,a){var s=this;vm.$http.get("/topic/"+t.params.id).then(function(t){console.log(t.data),s.topic=t.data.data}),a()}},q={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-main",[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"text item"},[a("span",[t._v("选择板块")]),t._v(" "),a("el-select",{model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.list,function(t){return a("el-option",{key:t.value,attrs:{label:t,value:t}})}),1)],1),t._v(" "),a("div",{staticClass:"text item"},[a("el-input",{attrs:{type:"textarea",autosize:""},model:{value:t.topic.title,callback:function(e){t.$set(t.topic,"title",e)},expression:"topic.title"}})],1),t._v(" "),a("div",{staticClass:"text item"},[a("mavon-editor",{attrs:{toolbars:t.toolbars},model:{value:t.topic.content,callback:function(e){t.$set(t.topic,"content",e)},expression:"topic.content"}})],1),t._v(" "),a("div",{staticClass:"text item"},[a("el-button",{attrs:{type:"success"},nativeOn:{click:function(e){return t.edittopic(e)}}},[t._v("修改话题")])],1)])],1)],1)},staticRenderFns:[]};var I=a("C7Lr")(j,q,!1,function(t){a("hq/2")},"data-v-d2bcd570",null).exports;s.default.use(d.a);var S=new d.a({routes:[{path:"/",redirect:"/topiclist/all"},{path:"/topiclist/:name",name:"topiclist",component:h,props:!0},{path:"/topic/:id",name:"topic",component:g,props:!0},{path:"/center",name:"center",component:b},{path:"/user/:loginname",name:"user",component:y,props:!0},{path:"/logout",name:"logout",component:T},{path:"/create",name:"create",component:M},{path:"/msg",name:"msg",component:N},{path:"/collect/:loginname",name:"collect",component:O,props:!0},{path:"/topic/:id/edit",name:"edit",component:I,props:!0}]}),H=(a("QKcw"),a("bQIR")),K=a.n(H),z=(a("gFLX"),{mutationLogin:function(t){t.isLogined=!0},mutationLoginname:function(t,e){t.loginname=e},mutationAccesstoken:function(t,e){t.accesstoken=e},mutationLogout:function(t){t.isLogined=!1,t.loginname="",t.accesstoken="",t.author_id=""},mutationAuthorId:function(t,e){t.author_id=e}}),G={};s.default.use(i.a);var P=new i.a.Store({state:{topics:[{name:"all",desc:"全部"},{name:"good",desc:"精华"},{name:"share",desc:"分享"},{name:"ask",desc:"问答"},{name:"job",desc:"招聘"},{name:"dev",desc:"客户端测试"}],isLogined:!1,loginname:"",accesstoken:"",author_id:""},getters:{moreMenus:function(t){return t.isLogined?t.LoginedmoreMenus:t.unLoginedmoreMenus},getTopicDescByTab:function(t){return function(e){for(var a=0;a<t.topics.length;a++)if(t.topics[a].name==e)return t.topics[a].desc}}},mutations:z,actions:G}),Y=a("I29D"),V=a.n(Y).a.create({baseURL:"https://cnodejs.org/api/v1"});s.default.prototype.$http=V,s.default.use(K.a),s.default.config.productionTip=!1,new s.default({el:"#app",router:S,store:P,components:{App:c},template:"<App/>"})},QKcw:function(t,e){},XdWo:function(t,e){},bZrT:function(t,e){},btno:function(t,e){},cp4y:function(t,e){},dpPd:function(t,e){},gFLX:function(t,e){},"hq/2":function(t,e){},nKBr:function(t,e){},soM1:function(t,e){},tJEP:function(t,e){},xAza:function(t,e){t.exports="data:image/png;base64,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"}},["NHnr"]);
//# sourceMappingURL=app.d3529a6dbe2cfee2375f.js.map